{% extends "/adm/layout_adm.html" %}

{% block head %}
<title>Cadastro de Clientes</title>
<link rel="stylesheet" href="/static/css/layout.css">
<link rel="stylesheet" href="/static/css/cadastros.css">
<link rel="stylesheet" href="/static/css/administrador.css">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='general.css') }}"> 
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
{% endblock %}

{% block body %}

    <main>
    <body style="background-color: #ffffff;">
        <div class="container">
        <!-- <header>
            <div class="row" style="height:30%">
                <div class="col-md-3 align-self-center"><img src="static/logo.png" id="logo_header"></div>
                <div class="col-md-3 align-self-end"><a href="{{url_for('homepage')}}"><button class="btn_menu">Home</button></a></div>
                <div class="col-md-3 align-self-end"><a href="{{url_for('agendamento')}}"><button class="btn_menu">Agendamento</button></a></div>
                <div class="col-md-3 align-self-end"><button class="btn_menu">Log Out</button></div> 
            </div>
        </header> -->
            <div class="row content">
            <h1>Administração de clientes</h1>
            <div>
                Aqui é a página de administração dos clientes.<br><br>
            </div>

            

            {% set mensagem = get_flashed_messages() %}
            {% if mensagem %}
                <div class="flash_alerta">
                     {{mensagem[0]}}
                </div>
            {% endif %}
            
            <!--Início do código novo do formulário para deixa bonitão-->

            <div class="container_form">
                <h2>Cadastro de Clientes</h2>

                <form action="/administrador" id="administrador" method="POST">
                    <div class="form_grupo">
                        <label for="Nome" class="form_label">Nome:</label>
                        <input type="text" class="form_input" name="nome" id="nome" required placeholder="Digite o nome e sobrenome">
                    </div>

                    <div class="form_grupo">
                        <label for="CPF" class="form_label">CPF/CNPJ:</label>
                        <input type="text" class="form_input" name="cpf" id="cpf" required placeholder="Digite apenas números">
                    </div>

                    <div class="form_grupo">
                        <label for="Telefone" class="form_label">Telefone:</label>
                        <input type="text" class="form_input" name="telefone" id="telefone" required placeholder="Digite apenas números: DDD e número">
                    </div>

                    <div class="form_grupo">
                        <label for="Data" class="form_label">Endereço</label>
                        <input type="text" class="form_input" name="endereco" id="endereco" required placeholder="Digite o endereço">
                    </div>

                    <div class="form_grupo">
                        <label for="email" class="form_label">Email:</label>
                        <input type="email" class="form_input" name="email" id="email" required placeholder="Digite seu email">
                    </div>

                    <div class="form_grupo">
                        <label for="Tipo do serviço" class="text">Tipo de Serviço</label> <!--A class aqui é text, diferente dos outros-->
                            <select name="tipoServico" id="tipoServico" class="dropdown" required>
                                <option selected disabled class="form_select_option" value="">Selecione</option>
                                <option value="Montagem" class="form_select_option">Montagem</option>
                                <option value="Desmontagem" class="form_select_option">Desmontagem</option>
                                <option value="Manutencao" class="form_select_option">Manuntenção</option>
                                <option value="Marcenaria" class="form_select_option">Marcenaria</option>
                            </select>
                    </div>

                    <div class="form_grupo">
                        <label for="Data" class="form_label">Agenda:</label><br>
                        <input type="date" class="form_input" name="agenda" id="agenda" required placeholder="Digite a agenda desejada">
                    </div>

                    <button type="submit" id="btnCadastro" class="btn btn-success">
                        <span></span>
                        <span></span>Cadastrar
                    </button>

                </form>
            </div>
            
            <!--Fim do código novo do formulário para deixa bonitão-->

            <!--código antigo que fiz a implmentação do back-end e testes

            <div id="form_cadastro">
                <form action="/administrador" id="administrador" method="POST">
                    <label for="Nome">Nome:</label><br>
                    <input type="text" name="nome" id="nome" required placeholder="Digite o nome e sobrenome"><br><br>
                    <label for="CPF">CPF:</label><br>
                    <input type="text" name="cpf" id="cpf" required placeholder="digite apenas números"><br><br>
                    <label for="Telefone">Telefone:</label><br>
                    <input type="text" name="telefone" id="telefone" required placeholder="digite apenas números: DDD e número"><br><br>
                    <label for="Data">Endereço</label><br>
                    <input type="text" name="endereco" id="endereco" required placeholder="digite o endereço"><br><br>
                    <label for="email">Email:</label><br>
                    <input type="email" name="email" id="email" required placeholder="digite seu email"><br><br>
                    <label for="Tipo do serviço">Tipo de Serviço:</label><br>
                    <input type="text" name="tipoServico" id="tipoServico" required placeholder="digite o serviço"><br><br>
                    <label for="Data">Agenda:</label><br>
                    <input type="text" name="agenda" id="agenda" required placeholder="digite a agenda desejada"><br><br>
                    <button type="submit" id="btnCadastro" class="btn btn-dark btn-lg">
                        <span></span>
                        <span></span>Cadastrar
                    </button>
                </form> <br>
            </div>

            -->

            <h2>Clientes pendentes</h2>
            <div id="form_Tabela">
                <table>
                    <tr>
                        <th>Nome</th>
                        <th>CPF</th>
                        <th>Telefone</th>
                        <th>Endereço</th>
                        <th>Tipo de Serviço</th>
                        <th>Data de Execução</th>
                        <th>Ações</th>
                    </tr>
                    <tr>
                        <td>Elder</td>
                        <td>1111111111111</td>
                        <td>1999999999</td>
                        <td>Rua Fulano</td>
                        <td>Instalação</td>
                        <td>14/02/58</td>
                        <td>Aceitar Serviço / Deletar</td>
                    </tr>
                    
                </table><br>
            </div>
            

            <h2>Base de clientes</h2>
            <div id="form_Tabela">
                <table>
                    <tr>
                        <th>Nome</th>
                        <th>CPF</th>
                        <th>Telefone</th>
                        <th>Email</th>
                        <th>Endereço</th>
                        <th>Tipo de Serviço</th>
                        <th>Data de Execução</th>
                        <th colspan="2">Ações</th>
                    </tr>
                    
               
                    {% if clientes %}
                    {% for c in clientes %}
                        <tr>
                            <td>{{c["nome"]}}</td>
                            <td>{{c["cpf"]}}</td>
                            <td>{{c["telefone"]}}</td>
                            <td>{{c["email"]}}</td>
                            <td>{{c["endereco"]}}</td>
                            <td>{{c["tipoServico"]}}</td>
                            <td>{{c["agenda"]}}</td>
                            <td><a class="btn btn-primary btn-sm">Atualizar</a></td>
                            <td><a class="btn btn-danger btn-sm" href='/excluir/{{c["cpf"]}}'>Excluir</a></td>
                        </tr>
                    
                    {% endfor %}
                    {% else %}
                    <h3>Não existem clientes cadastrados</h3>
                    {% endif %}
                    
                </table> <br><br>
            </div>
            
        </div>
        </div>
    </body>
    </main>
{% endblock %}